generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

<<<<<<< HEAD
model Tenant {
  id            String   @id @default(uuid())
  name          String
  slug          String   @unique
  domain        String?  @unique
  isActive      Boolean  @default(true)
  settings      Json?    // Stores biometric settings, logo, etc.
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  users             User[]
  locations         Location[]
  branches          Branch[]
  departments       Department[]
  designations      Designation[]
  categories        Category[]
  employees         Employee[]
  fieldLogs         FieldLog[]
  auditLogs         AuditLog[]
  salaryComponents  SalaryComponent[]
  employeeSalaryComponents EmployeeSalaryComponent[]
  statutoryConfigs  StatutoryConfig[]
  payrollRuns       PayrollRun[]
  shifts            Shift[]
  employeeShifts    EmployeeShift[]
  holidays          Holiday[]
  leaveTypes        LeaveType[]
  leaveEntries      LeaveEntry[]
  devices           Device[]
  deviceUsers       DeviceUser[]
  rawDeviceLogs     RawDeviceLog[]
  attendanceLogs    AttendanceLog[]
  syncStatuses      SyncStatus[]
  payrolls          Payroll[]
  companyProfiles   CompanyProfile[]
  deviceCommands    DeviceCommand[]
}



model User {
  id         String   @id @default(uuid())
  tenantId   String
  tenant     Tenant   @relation(fields: [tenantId], references: [id])
  username   String
=======
model User {
  id         String   @id @default(uuid())
  username   String   @unique
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  password   String
  role       String   @default("admin") // admin, manager, employee
  employeeId String?  @unique // Link to employee record if any
  employee   Employee? @relation(fields: [employeeId], references: [id])
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  auditLogs  AuditLog[]
<<<<<<< HEAD

  @@unique([username, tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model Location {
  id          String    @id @default(uuid())
<<<<<<< HEAD
  tenantId    String
  tenant      Tenant    @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  name        String
  address     String?
  city        String?
  state       String?
  country     String?
  zipCode     String?
  isActive    Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  branches    Branch[]
}

model Branch {
  id           String       @id @default(uuid())
<<<<<<< HEAD
  tenantId     String
  tenant       Tenant       @relation(fields: [tenantId], references: [id])
  name         String
  code         String
=======
  name         String
  code         String       @unique
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  locationId   String?
  location     Location?    @relation(fields: [locationId], references: [id])
  isActive     Boolean      @default(true)
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt
  employees    Employee[]
  departments  Department[]
<<<<<<< HEAD

  @@unique([code, tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model Department {
  id          String     @id @default(uuid())
<<<<<<< HEAD
  tenantId    String
  tenant      Tenant     @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  name        String
  code        String
  branchId    String?
  branch      Branch?    @relation(fields: [branchId], references: [id])
  // managers    Employee[] @relation("DeptManagers") // M-N relation
  managers    Employee[] @relation("DeptManagers")
  description String?
  isActive    Boolean    @default(true)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  employees   Employee[] @relation("EmployeeDept")

<<<<<<< HEAD
  @@unique([code, branchId, tenantId])
=======
  @@unique([code, branchId])
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model Designation {
  id          String     @id @default(uuid())
<<<<<<< HEAD
  tenantId    String
  tenant      Tenant     @relation(fields: [tenantId], references: [id])
  name        String
  code        String
=======
  name        String
  code        String     @unique
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  description String?
  isActive    Boolean    @default(true)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  employees   Employee[]
<<<<<<< HEAD

  @@unique([code, tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model Category {
  id          String     @id @default(uuid())
<<<<<<< HEAD
  tenantId    String
  tenant      Tenant     @relation(fields: [tenantId], references: [id])
  name        String
  code        String
=======
  name        String
  code        String     @unique
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  description String?
  isActive    Boolean    @default(true)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  employees   Employee[]
<<<<<<< HEAD

  @@unique([code, tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model Employee {
  id              String           @id @default(uuid())
<<<<<<< HEAD
  tenantId        String
  tenant          Tenant           @relation(fields: [tenantId], references: [id])
  employeeCode    String
=======
  employeeCode    String           @unique
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  firstName       String
  lastName        String
  email           String?
  phone           String?
  branchId        String?
  branch          Branch?          @relation(fields: [branchId], references: [id])
  departmentId    String?
  department      Department?      @relation("EmployeeDept", fields: [departmentId], references: [id])
  designationId   String?
  designation     Designation?     @relation(fields: [designationId], references: [id])
  categoryId      String?
  category        Category?        @relation(fields: [categoryId], references: [id])
  shiftId         String?
  shift           Shift?           @relation(fields: [shiftId], references: [id])
  deviceUserId    String?
<<<<<<< HEAD
  sourceEmployeeId String?
=======
  sourceEmployeeId String?          @unique
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  dateOfJoining   DateTime?
  isActive        Boolean          @default(true)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  
  user            User?

  // Multi-level approval relations
  managedDepartments   Department[] @relation("DeptManagers")
  managerApprovedLeaves LeaveEntry[] @relation("ManagerApprovedLeaves")
  ceoApprovedLeaves     LeaveEntry[] @relation("CEOApprovedLeaves")

  attendanceLogs  AttendanceLog[]
  leaveEntries    LeaveEntry[]
  employeeShifts  EmployeeShift[]
  payrolls        Payroll[]
  
  // Salary Fields (Fixed)
  basicSalary       Float            @default(0)
  hra               Float            @default(0)
  conveyance        Float            @default(0)
  medicalAllowance  Float            @default(0)
  specialAllowance  Float            @default(0)
  otherAllowances   Float            @default(0)
  standardDeductions Float           @default(0)
  
  // Banking Details
  bankName          String?
  accountNumber     String?
  ifscCode          String?
  panNumber         String?
  aadhaarNumber     String?

  // Advanced Payroll Configuration
  isPFEnabled       Boolean          @default(false)
  isESIEnabled      Boolean          @default(false)
  isPTEnabled       Boolean          @default(true) // Professional Tax
  isOTEnabled       Boolean          @default(false)
  otRateMultiplier  Float            @default(1.5)

  fieldLogs       FieldLog[]
  salaryComponents EmployeeSalaryComponent[]
<<<<<<< HEAD

  @@unique([employeeCode, tenantId])
  @@unique([sourceEmployeeId, tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model FieldLog {
  id              String    @id @default(uuid())
<<<<<<< HEAD
  tenantId        String
  tenant          Tenant    @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  employeeId      String
  employee        Employee  @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  type            String    // IN, OUT
  timestamp       DateTime  @default(now())
  location        String?   // lat,lng or address
  image           String?   // Base64 or URL
  status          String    @default("pending") // pending, approved, rejected
  remarks         String?
  processed       Boolean   @default(false)
  approvedBy      String?
  approvedAt      DateTime?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@index([employeeId, timestamp])
  @@index([status])
<<<<<<< HEAD
  @@index([tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model CompanyProfile {
  id                String   @id @default(uuid())
<<<<<<< HEAD
  tenantId          String
  tenant            Tenant   @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  name              String
  legalName         String?
  address           String?
  logo              String?
  gstin             String?
  pan               String?
  pfCode            String?
  esiCode           String?
  tan               String?
  bankName          String?
  accountNumber     String?
  ifscCode          String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model AuditLog {
  id                String   @id @default(uuid())
<<<<<<< HEAD
  tenantId          String
  tenant            Tenant   @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  userId            String?
  user              User?    @relation(fields: [userId], references: [id])
  action            String   // e.g., 'SALARY_UPDATE', 'LEAVE_APPROVE', 'PUNCH_OVERRIDE'
  entityId          String?  // ID of the employee/leave/payroll being touched
  entityType        String   // 'Employee', 'LeaveEntry', etc.
  description       String
  metadata          String?  // JSON string of before/after values
  oldValue          String?
  newValue          String?
  ipAddress         String?
  userAgent         String?
  createdAt         DateTime @default(now())

  @@index([createdAt])
<<<<<<< HEAD
  @@index([tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model SalaryComponent {
  id                String   @id @default(uuid())
<<<<<<< HEAD
  tenantId          String
  tenant            Tenant   @relation(fields: [tenantId], references: [id])
  name              String
  code              String   // e.g., BASIC, HRA, PF_EMP
=======
  name              String
  code              String   @unique // e.g., BASIC, HRA, PF_EMP
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  type              String   // EARNING, DEDUCTION
  calculationType   String   // FIXED, PERCENTAGE, FORMULA
  percentageOf      String?  // If calculationType is PERCENTAGE, percentage of which code?
  value             Float    @default(0)
  isStatutory       Boolean  @default(false)
  isTaxable         Boolean  @default(true)
  isActive          Boolean  @default(true)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  employeeLinks     EmployeeSalaryComponent[]
<<<<<<< HEAD

  @@unique([code, tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model EmployeeSalaryComponent {
  id                String          @id @default(uuid())
<<<<<<< HEAD
  tenantId          String
  tenant            Tenant          @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  employeeId        String
  employee          Employee        @relation(fields: [employeeId], references: [id])
  componentId       String
  component         SalaryComponent @relation(fields: [componentId], references: [id])
  monthlyAmount     Float           @default(0)
  effectiveFrom     DateTime        @default(now())
  isActive          Boolean         @default(true)
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @updatedAt

  @@unique([employeeId, componentId])
<<<<<<< HEAD
  @@index([tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model StatutoryConfig {
  id                String   @id @default(uuid())
<<<<<<< HEAD
  tenantId          String
  tenant            Tenant   @relation(fields: [tenantId], references: [id])
  key               String   // e.g., PF_LIMIT, ESI_LIMIT, PT_SLABS
=======
  key               String   @unique // e.g., PF_LIMIT, ESI_LIMIT, PT_SLABS
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  value             String   // JSON string of config
  description       String?
  effectiveFrom     DateTime @default(now())
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
<<<<<<< HEAD

  @@unique([key, tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model PayrollRun {
  id                String    @id @default(uuid())
<<<<<<< HEAD
  tenantId          String
  tenant            Tenant    @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  month             Int
  year              Int
  batchName         String
  status            String    @default("draft") // draft, processing, review, finalized, locked
  totalEmployees    Int       @default(0)
  totalGross        Float     @default(0)
  totalNet          Float     @default(0)
  processedBy       String?
  processedAt       DateTime?
  approvedBy        String?
  approvedAt        DateTime?
  periodStart       DateTime
  periodEnd         DateTime
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  payrolls          Payroll[]

<<<<<<< HEAD
  @@unique([month, year, tenantId])
=======
  @@unique([month, year])
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model Shift {
  id              String           @id @default(uuid())
<<<<<<< HEAD
  tenantId        String
  tenant          Tenant           @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  name            String
  startTime       String
  endTime         String
  gracePeriodIn   Int              @default(0)
  gracePeriodOut  Int              @default(0)
  isNightShift    Boolean          @default(false)
  isActive        Boolean          @default(true)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  employees       Employee[]
  employeeShifts  EmployeeShift[]
<<<<<<< HEAD

  @@unique([name, tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model EmployeeShift {
  id          String    @id @default(uuid())
<<<<<<< HEAD
  tenantId    String
  tenant      Tenant    @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  employeeId  String
  employee    Employee  @relation(fields: [employeeId], references: [id])
  shiftId     String
  shift       Shift     @relation(fields: [shiftId], references: [id])
  startDate   DateTime
  endDate     DateTime?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
<<<<<<< HEAD

  @@index([tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model Holiday {
  id          String   @id @default(uuid())
<<<<<<< HEAD
  tenantId    String
  tenant      Tenant   @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  name        String
  date        DateTime
  description String?
  isRecurring Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
<<<<<<< HEAD

  @@unique([date, tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model LeaveType {
  id           String       @id @default(uuid())
<<<<<<< HEAD
  tenantId     String
  tenant       Tenant       @relation(fields: [tenantId], references: [id])
  name         String
  code         String
=======
  name         String
  code         String       @unique
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  description  String?
  isPaid       Boolean      @default(true)
  isActive     Boolean      @default(true)
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt
  leaveEntries LeaveEntry[]
<<<<<<< HEAD

  @@unique([code, tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model LeaveEntry {
  id               String    @id @default(uuid())
<<<<<<< HEAD
  tenantId         String
  tenant           Tenant    @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  employeeId       String
  employee         Employee  @relation(fields: [employeeId], references: [id])
  leaveTypeId      String
  leaveType        LeaveType @relation(fields: [leaveTypeId], references: [id])
  startDate        DateTime
  endDate          DateTime
  days             Float
  reason           String?
  status           String    @default("pending_manager") // pending_manager, pending_ceo, approved, rejected
  
  managerApproval  Boolean?
  managerApprovedAt DateTime?
  managerId        String?
  manager          Employee? @relation("ManagerApprovedLeaves", fields: [managerId], references: [id])
  
  ceoApproval      Boolean?
  ceoApprovedAt    DateTime?
  ceoId            String?
  ceo              Employee? @relation("CEOApprovedLeaves", fields: [ceoId], references: [id])

  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
<<<<<<< HEAD

  @@index([tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model Device {
  id              String         @id @default(uuid())
<<<<<<< HEAD
  tenantId        String
  tenant          Tenant         @relation(fields: [tenantId], references: [id])
  deviceId        String
  serialNumber    String?
  name            String
  protocol        String         @default("ESSL_ADMS") // ESSL_ADMS, MATRIX_DIRECT, REALTIME_DIRECT, HIKVISION_DIRECT, SQL_MIRROR
=======
  deviceId        String         @unique
  name            String
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  ipAddress       String?
  port            Int?
  location        String?
  status          String         @default("offline")
  lastConnected   DateTime?
  isActive        Boolean        @default(true)
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  deviceUsers     DeviceUser[]
  rawDeviceLogs   RawDeviceLog[]
<<<<<<< HEAD
  commands        DeviceCommand[]

  @@unique([deviceId, tenantId])
  @@unique([serialNumber, tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model DeviceUser {
  id          String   @id @default(uuid())
<<<<<<< HEAD
  tenantId    String
  tenant      Tenant   @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  deviceId    String
  device      Device   @relation(fields: [deviceId], references: [id])
  deviceUserId String
  employeeId  String?
  name        String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

<<<<<<< HEAD
  @@unique([deviceId, deviceUserId, tenantId])
=======
  @@unique([deviceId, deviceUserId])
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model RawDeviceLog {
  id          String   @id @default(uuid())
<<<<<<< HEAD
  tenantId    String
  tenant      Tenant   @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  deviceId    String
  device      Device   @relation(fields: [deviceId], references: [id])
  userId      String
  punchTime   DateTime
  punchType   String?
  isProcessed Boolean  @default(false)
  createdAt   DateTime @default(now())

  @@index([punchTime])
  @@index([userId, punchTime])
  @@index([isProcessed])
<<<<<<< HEAD
  @@index([tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model AttendanceLog {
  id              String    @id @default(uuid())
<<<<<<< HEAD
  tenantId        String
  tenant          Tenant    @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  employeeId      String
  employee        Employee  @relation(fields: [employeeId], references: [id])
  date            DateTime
  firstIn         DateTime?
  lastOut         DateTime?
  workingHours    Float?
  shiftStart      DateTime?
  shiftEnd        DateTime?
  lateArrival     Int       @default(0)
  earlyDeparture  Int       @default(0)
  status          String    @default("present")
  totalPunches    Int       @default(0)
  rawData         String?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

<<<<<<< HEAD
  @@unique([employeeId, date, tenantId])
  @@index([date])
  @@index([employeeId])
  @@index([tenantId])
=======
  @@unique([employeeId, date])
  @@index([date])
  @@index([employeeId])
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model SyncStatus {
  id            String   @id @default(uuid())
<<<<<<< HEAD
  tenantId      String
  tenant        Tenant   @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  lastSyncTime  DateTime
  recordsSynced Int      @default(0)
  status        String
  message       String?
  createdAt     DateTime @default(now())
<<<<<<< HEAD

  @@index([tenantId])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}

model Payroll {
  id                String    @id @default(uuid())
<<<<<<< HEAD
  tenantId          String
  tenant            Tenant    @relation(fields: [tenantId], references: [id])
=======
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
  employeeId        String
  employee          Employee  @relation(fields: [employeeId], references: [id])
  month             Int
  year              Int
  totalWorkingDays  Int
  actualPresentDays Float
  lopDays           Float            @default(0) // Loss of Pay Days
  paidDays          Float
  
  basicPaid         Float
  hraPaid           Float
  conveyancePaid    Float            @default(0)
  medicalPaid       Float            @default(0)
  specialPaid       Float            @default(0)
  allowancesPaid    Float
  
  // Variable Components
  bonus             Float            @default(0)
  incentives        Float            @default(0)
  arrears           Float            @default(0)
  
  // Overtime
  otHours           Float            @default(0)
  otPay             Float            @default(0)
  
  // Deductions (Employee Share)
  pfDeduction       Float            @default(0)
  esiDeduction      Float            @default(0)
  ptDeduction       Float            @default(0) // Professional Tax
  tdsDeduction      Float            @default(0)
  otherDeductions   Float            @default(0)
  
  // Employer Contributions
  employerPF        Float            @default(0)
  employerESI       Float            @default(0)
  
  grossSalary       Float
  totalDeductions   Float
  netSalary         Float
  
  payrollRunId      String?
  payrollRun        PayrollRun? @relation(fields: [payrollRunId], references: [id])
  
  status            String    @default("draft") // draft, generated, paid, locked
  remarks           String?
  paidAt            DateTime?
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt

<<<<<<< HEAD
  @@unique([employeeId, month, year, tenantId])
  @@index([payrollRunId])
  @@index([tenantId])
}

model DeviceCommand {
  id           String    @id @default(uuid())
  tenantId     String
  tenant       Tenant    @relation(fields: [tenantId], references: [id])
  deviceId     String
  device       Device    @relation(fields: [deviceId], references: [id])
  command      String    // The actual protocol command string
  status       String    @default("pending") // pending, sent, executed, failed
  response     String?   // Device response if any
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  sentAt       DateTime?

  @@index([deviceId, status])
  @@index([tenantId])
=======
  @@unique([employeeId, month, year])
  @@index([payrollRunId])
>>>>>>> 3d0eb0a04349ba3760c3b41b88ef47f345d6486e
}
